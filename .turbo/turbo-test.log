
> @repo/web@0.1.0 test C:\Users\NAT20\Desktop\website\apps\web
> vitest run

[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m

[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90mC:/Users/NAT20/Desktop/website/apps/web[39m

 [32mâœ“[39m src/__tests__/content-security.test.ts [2m([22m[2m23 tests[22m[2m)[22m[90m 10[2mms[22m[39m
 [32mâœ“[39m src/lib/stripe/__tests__/service.test.ts [2m([22m[2m10 tests[22m[2m)[22m[90m 17[2mms[22m[39m
[90mstderr[2m | src/__tests__/content-access.test.ts[2m > [22m[2m/api/content/access[2m > [22m[2mContent Type Handling[2m > [22m[2mshould return error for unsupported content type
 [32mâœ“[39m src/app/api/stripe/checkout/__tests__/route.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 60[2mms[22m[39m
[22m[39mError in content access API: Error: Unsupported content type
    at generateContentAccess [90m(C:\Users\NAT20\Desktop\website\apps\web\[39msrc\app\api\content\access\route.ts:150:13[90m)[39m
    at POST [90m(C:\Users\NAT20\Desktop\website\apps\web\[39msrc\app\api\content\access\route.ts:120:28[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\NAT20\Desktop\website\apps\web\[39msrc\__tests__\content-access.test.ts:280:24
    at file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:533:5
    at runTest (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1056:11)
    at runSuite (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1205:15)
 [32mâœ“[39m src/__tests__/content-access.test.ts [2m([22m[2m19 tests[22m[2m)[22m[90m 62[2mms[22m[39m
    at runSuite (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1205:15)
    at runSuite (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1205:15)
    at runFiles (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1262:5)

[90mstderr[2m | src/__tests__/content-access.test.ts[2m > [22m[2m/api/content/access[2m > [22m[2mError Handling[2m > [22m[2mshould handle GraphQL query errors
[22m[39mError in content access API: Error: Database connection failed
    at [90mC:\Users\NAT20\Desktop\website\apps\web\[39msrc\__tests__\content-access.test.ts:532:35
    at file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:146:14
    at file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:533:11
    at runWithTimeout (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:39:7)
    at runTest (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1056:17)
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1205:15)
    at runSuite (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1205:15)
    at runSuite (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1205:15)
    at runFiles (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1262:5)

[90mstderr[2m | src/__tests__/content-access.test.ts[2m > [22m[2m/api/content/access[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing environment variables
[22m[39mError in content access API: Error: CONTENT_SIGNING_SECRET environment variable is required
    at generateContentAccess [90m(C:\Users\NAT20\Desktop\website\apps\web\[39msrc\app\api\content\access\route.ts:136:11[90m)[39m
    at POST [90m(C:\Users\NAT20\Desktop\website\apps\web\[39msrc\app\api\content\access\route.ts:120:28[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\NAT20\Desktop\website\apps\web\[39msrc\__tests__\content-access.test.ts:567:24
    at file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:533:5
    at runTest (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1056:11)
    at runSuite (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1205:15)
    at runSuite (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1205:15)
    at runSuite (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1205:15)
    at runFiles (file:///C:/Users/NAT20/Desktop/website/node_modules/[4m.pnpm[24m/@vitest+runner@2.1.9/node_modules/[4m@vitest[24m/runner/dist/index.js:1262:5)

 [32mâœ“[39m src/components/purchase/__tests__/purchase-button.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[90m 74[2mms[22m[39m
 [32mâœ“[39m src/components/__tests__/auth.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[90m 82[2mms[22m[39m
 [32mâœ“[39m src/components/products/__tests__/products-list.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[90m 169[2mms[22m[39m

[2m Test Files [22m [1m[32m7 passed[39m[22m[90m (7)[39m
[2m      Tests [22m [1m[32m80 passed[39m[22m[90m (80)[39m
[2m   Start at [22m 19:01:08
[2m   Duration [22m 12.46s[2m (transform 641ms, setup 7.27s, collect 8.68s, tests 474ms, environment 56.25s, prepare 1.28s)[22m

